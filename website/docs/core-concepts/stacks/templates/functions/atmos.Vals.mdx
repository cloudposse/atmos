---
title: atmos.Vals
sidebar_position: 3
sidebar_label: atmos.Vals
description: Load config values and secrets from external sources
---
import File from '@site/src/components/File'
import Intro from '@site/src/components/Intro'
import Admonition from '@theme/Admonition'

<Intro>
The `atmos.Vals` template function wraps [vals](https://github.com/helmfile/vals) to support loading config values and secrets from external sources.
</Intro>

<Admonition type="warning" title="Careful with secrets">
  `atmos describe stack` will reveal the secrets in plain text without obfuscation.
</Admonition>

## Usage

To use [vals](https://github.com/helmfile/vals) environment variables need to be set corresponding to the secrets backend used.

```yaml
  {{ atmos.Vals "<reference>" }}
```

## Arguments

<dl>
  <dt>`reference`</dt>
  <dd>vals reference URI</dd>
</dl>

For example, to retrieve a secret from 1Password, we could do the following:

<File>
```yaml
components:
  terraform:
    dockerconfig:
      vars:
        auths:
          ghcr.io:
            auth: '{{ atmos.Vals "ref+op://infra/ghcr/token" }}'
```
</File>

<b>Note</b>: 1Password backend expects the `OP_SERVICE_ACCOUNT_TOKEN` environment variable to be set prior to running Atmos.

## Expression syntax

References are URI-like expressions:

```
ref+BACKEND://PATH[?PARAMS][#FRAGMENT][+]
```

for mor details, see: https://github.com/helmfile/vals?tab=readme-ov-file#expression-syntax

## Supported backends

- [Vault](https://github.com/helmfile/vals#vault)
- [AWS SSM Parameter Store](https://github.com/helmfile/vals#aws-ssm-parameter-store)
- [AWS Secrets Manager](https://github.com/helmfile/vals#aws-secrets-manager)
- [AWS S3](https://github.com/helmfile/vals#aws-s3)
- [GCP Secrets Manager](https://github.com/helmfile/vals#gcp-secrets-manager)
- [GCP KMS](https://github.com/helmfile/vals#gcp-kms)
- [Google Sheets](https://github.com/helmfile/vals#google-sheets)
- [Google GCS](https://github.com/helmfile/vals#google-gcs)
- [SOPS](https://github.com/helmfile/vals#sops) powered by [sops](https://github.com/getsops/sops)
- [Terraform (tfstate)](https://github.com/helmfile/vals#terraform-tfstate) powered by [tfstate-lookup](https://github.com/fujiwara/tfstate-lookup)
- [Echo](https://github.com/helmfile/vals#echo)
- [File](https://github.com/helmfile/vals#file)
- [Azure Key Vault](https://github.com/helmfile/vals#azure-key-vault)
- [EnvSubst](https://github.com/helmfile/vals#envsubst)
- [GitLab](https://github.com/helmfile/vals#gitlab)
- [1Password](https://github.com/helmfile/vals#1password)
- [1Password Connect](https://github.com/helmfile/vals#1password-connect)
- [Doppler](https://github.com/helmfile/vals#doppler)
- [Pulumi State](https://github.com/helmfile/vals#pulumi-state)
- [Kubernetes](https://github.com/helmfile/vals#kubernetes)
- [Conjur](https://github.com/helmfile/vals#conjur)
- [HCP Vault Secrets](https://github.com/helmfile/vals#hcp-vault-secrets)
- [HTTP JSON](https://github.com/helmfile/vals#http-json)
- [Bitwarden](https://github.com/helmfile/vals#bitwarden)

For the complete list of supported backends, see: https://github.com/helmfile/vals?tab=readme-ov-file#supported-backends
