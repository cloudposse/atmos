---
title: "!include"
sidebar_position: 6
sidebar_label: "!include"
description: Download local or remote files from different sources, and assign the file contents or individual values to Atmos stack manifests
---

import Intro from '@site/src/components/Intro'
import File from '@site/src/components/File'

<Intro>
    The `!include` Atmos YAML function allows downloading local or remote files from different sources,
    and assigning the file contents or individual values to the sections in Atmos stack manifests.
</Intro>

## Usage

The `!include` function can be called with either one or two parameters:

```yaml
  # Download the file and assign its content to the variable
  var1: !include <file-path>

  # Download the file, filter the content using the YQ expression,
  # and assign the result to the variable
  var2: !include <file-path> <yq-expression>
```

## Arguments

<dl>
    <dt>`file-path`</dt>
    <dd>
        Path to a local or remote file
     </dd>

    <dt>`yq-expression`</dt>
    <dd>(Optional) [YQ](https://mikefarah.gitbook.io/yq) expression to retrieve individual values from the file</dd>
</dl>

## Supported File Protocols

The `!include` function supports the following local file paths:
  - absolute paths (e.g. `/Users/me/Documents/values.yaml`)
  - paths relative to the current Atmos manifest where the `!include` function is executed (e.g. `./values.yaml`, `../config/values.yaml`)
  - paths relative to the [`base_path`](/cli/configuration/#base-path) defined in `atmos.yaml` CLI config file (e.g. `stacks/catalog/vpc/defaults.yaml`)

To download remote files from different sources, the `!include` function uses [`go-getter`](https://github.com/hashicorp/go-getter)
(used by [Terraform](https://www.terraform.io/) for downloading modules) and supports the following protocols:

- `tar` - Tar files, potentially compressed (tar.gz, tar.bz2, etc.)
- `zip` - Zip files
- `http` - HTTP URLs
- `https` - HTTPS URLs
- `git` - Git repositories, which can be accessed via HTTPS or SSH
- `hg` - Mercurial repositories, accessed via HTTP/S or SSH
- `s3` - Amazon S3 bucket URLs
- `gcs` - Google Cloud Storage URLs
- `oci` - Open Container Initiative (OCI) images
- `scp` - Secure Copy Protocol for SSH-based transfers
- `sftp` - SSH File Transfer Protocol

:::tip
You can use [Atmos Stack Manifest Templating](/core-concepts/stacks/templates) in the `!include` YAML function parameters.
Atmos processes the templates first, and then executes the `!include` function, allowing you to provide the parameters to
the function dynamically.
:::

## Description

## Using YQ Expressions to retrieve individual values from files

To retrieve individual values from complex types such as maps and lists, or do any kind of filtering or querying,
you can utilize [YQ](https://mikefarah.gitbook.io/yq) expressions.

For example:

- Retrieve the first item from a list

```yaml
subnet_id1: !include <file-path> .private_subnet_ids[0]
```

- Read a key from a map

```yaml
username: !include <file-path> .config_map.username
```

For more details, review the following docs:

- [YQ Guide](https://mikefarah.gitbook.io/yq)
- [YQ Recipes](https://mikefarah.gitbook.io/yq/recipes)

## Examples:

```yaml
components:
  terraform:
    my-component:
      settings:
        config:
          user_id: 1
      vars:
        var1: !include ./dev.yaml
        var2: !include ./dev.yaml .components.terraform.vpc.vars
        var3: !include ./dev.yaml .components.terraform.vpc.vars.ipv4_primary_cidr_block
        var4: !include stacks/catalog/vpc/ue2.yaml
        var6: !include stacks/catalog/vpc/ue2.yaml .components.terraform.vpc.vars.availability_zones
        var7: !include a.txt
        var8: !include '"b c.txt" ".[1]"'
        var9: !include a.hcl
        var10: !include https://raw.githubusercontent.com/cloudposse/atmos/refs/heads/main/examples/quick-start-advanced/stacks/catalog/vpc-flow-logs-bucket/defaults.yaml
        var11: !include https://raw.githubusercontent.com/cloudposse/atmos/refs/heads/main/examples/quick-start-advanced/stacks/mixins/region/us-east-2.yaml .vars
        allowed_ips: !include https://api.github.com/meta .api
```
