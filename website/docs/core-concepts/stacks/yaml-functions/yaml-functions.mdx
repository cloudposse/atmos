---
title: Atmos YAML Functions
sidebar_position: 8
sidebar_label: Atmos YAML Functions
id: yaml-functions
---


import File from '@site/src/components/File'
import PillBox from '@site/src/components/PillBox'
import Intro from '@site/src/components/Intro'
import DocCardList from '@theme/DocCardList'

<PillBox>Advanced</PillBox>

<Intro>
    Atmos [YAML](https://en.wikipedia.org/wiki/YAML) Functions are a crucial part of Atmos stack manifests. They allow
    you to manipulate data and perform operations on the data to customize the stack configurations.
</Intro>

Atmos YAML functions are based on [YAML Explicit typing](https://yaml.org/spec/1.2.2/)
and user-defined [Explicit Tags](https://yaml.org/spec/1.2.2/#tags) (local data types).
Explicit tags are denoted by the exclamation point (__"!"__) symbol.
Atmos detects the tags in the stack manifests and executes the corresponding functions.

:::info
YAML data types can be divided into three categories: core, defined, and user-defined.
Core are ones expected to exist in any parser (e.g. floats, ints, strings, lists, maps).
Many more advanced data types, such as binary data, are defined in the YAML specification but not supported
in all implementations.
Finally, YAML defines a way to extend the data type definitions locally to accommodate user-defined classes,
structures, primitives, and functions.
:::

## Use-cases

 - The [__`!template`__](/core-concepts/stacks/yaml-functions/template) YAML function can be used to
   [handle template outputs containing maps or lists](/core-concepts/stacks/templates/functions/atmos.Component#handling-outputs-containing-maps-or-lists)
   returned from the [__`atmos.Component`__](/core-concepts/stacks/templates/functions/atmos.Component) template function

 - The [__`!exec`__](/core-concepts/stacks/yaml-functions/exec) YAML function is used to execute shell scripts and assign
   the results to the sections in Atmos stack manifests

 - The [__`!terraform.output`__](/core-concepts/stacks/yaml-functions/terraform.output) YAML function is used to
   [read the outputs (remote state) of components directly in Atmos stack manifests](/core-concepts/components/terraform/remote-state)

:::tip
You can use [Atmos Stack Manifest Templating](/core-concepts/stacks/templates) and Atmos YAML functions in the same
stack configurations at the same time.
Atmos processes the templates first, and then executes the YAML functions, allowing you to provide the parameters to
the YAML functions dynamically.
:::

## Examples

<File title="stack.yaml">
```yaml
components:
  terraform:
    component2:
      vars:
        # Handle the output of type list from the `atmos.Component` template function
        test_1: '!template {{ toJson (atmos.Component "component1" "plat-ue2-dev").outputs.test_list }}'

        # Handle the output of type map from the `atmos.Component` template function
        test_2: '!template {{ toJson (atmos.Component "component1" .stack).outputs.test_map }}'

        # Execute the shell script and assign the result to the `test_3` variable
        test_3: !exec echo 42

        # Execute the shell script to get the `test_label_id` output from the `component1` component in the stack `plat-ue2-dev`
        test_4: !exec atmos terraform output component1 -s plat-ue2-dev --skip-init -- -json test_label_id

        # Execute the shell script to get the `test_map` output from the `component1` component in the current stack
        test_5: !exec atmos terraform output component1 -s {{ .stack }} --skip-init -- -json test_map

        # Execute the shell script to get the `test_list` output from the `component1` component in the current stack
        test_6: !exec atmos terraform output component1 -s {{ .stack }} --skip-init -- -json test_list

        # Get the `test_label_id` output of type string from the `component1` component in the stack `plat-ue2-dev`
        test_7: !terraform.output component1 plat-ue2-dev test_label_id

        # Get the `test_label_id` output of type string from the `component1` component in the current stack
        test_8: !terraform.output component1 {{ .stack }} test_label_id

        # Get the `test_list` output of type list from the `component1` component in the current stack
        test_9: !terraform.output component1 {{ .stack }} test_list

        # Get the `test_map` output of type map from the `component1` component in the current stack
        test_10: !terraform.output component1 {{ .stack }} test_map
```
</File>

## Native Atmos YAML Functions

Atmos natively supports the following YAML functions:

<DocCardList/>
