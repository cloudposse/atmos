---
title: Configure Packer
sidebar_position: 4
sidebar_label: Configure Packer
id: packer
---
import useBaseUrl from '@docusaurus/useBaseUrl';
import KeyPoints from '@site/src/components/KeyPoints'
import Intro from '@site/src/components/Intro'

<Intro>
Atmos natively supports [HashiCorp Packer](https://developer.hashicorp.com/packer) and lets you create identical
machine images for multiple platforms from a single source template using the power of Atmos components and stacks.
It's compatible with every version of Packer and designed to work with multiple different versions of it concurrently.
<img width="150" align="right" src={useBaseUrl('/img/hashicorp-packer.svg')} alt="Packer"/>
</Intro>

<KeyPoints>
- How to configure Atmos to use Packer to build machine images
- Example Packer and Atmos configurations to build an AWS bastion AMI using an Amazon Linux 2023 base image
</KeyPoints>

Keep in mind that Atmos does not handle the downloading or installation
of Packer; it assumes that any required binaries for the commands are already installed on your system.

## CLI Configuration

```yaml
components:
  packer:
    # The executable to be called by Atmos when running Packer commands
    command: "packer"  # or `/usr/bin/packer`
    # Can also be set using 'ATMOS_COMPONENTS_PACKER_BASE_PATH' ENV var, or '--packer-dir' command-line argument
    # Supports both absolute and relative paths
    base_path: "components/packer"
```

<dl>
    <dt>`components.packer.command`</dt>
    <dd>The executable to be called by Atmos when running Packer commands</dd>

    <dt>`components.packer.base_path`</dt>
    <dd>The root directory where the Packer components and configurations are located. This path serves as the starting point for resolving any relative paths within the Packer setup.</dd>
</dl>

## Stack Configuration for Components

Settings for Packer can also be specified in Atmos stack configurations, where they are compatible with inheritance.
This feature allows projects to tailor behavior according to individual component needs.

While defaults for everything are defined in the `atmos.yaml`, the same settings can be overridden by Stack configurations at any level:

- `packer`
- `components.packer`
- `components.packer._component_`

For instance, you can modify the command executed for a specific component by overriding the `command` parameter.

```yaml
components:
  packer:
    bastion:
      # Use Packer v1.14.1 to provision the `bastion` component
      command: "/usr/local/bin/packer-1.14.1"
```

## Example: Configure and Provision a Packer Component with Atmos
