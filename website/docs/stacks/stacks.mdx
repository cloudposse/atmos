---
title: Stack Configuration
sidebar_position: 1
sidebar_label: Overview
description: Advanced stack configuration techniques
id: stacks
slug: /stacks
---
import Intro from '@site/src/components/Intro'
import DocCardList from '@theme/DocCardList'

<Intro>
Stacks are YAML files that configure your environments. They define which components to deploy, with what settings, and how they relate to each other. This is where configuration livesâ€”separate from your Terraform code.
</Intro>

<DocCardList />

## When to Use Advanced Features

Not every project needs these advanced features. Here's a guide:

### Start with Basics

If you're new to Atmos, stick to:
- Simple imports for shared configuration
- Single inheritance for component variations
- Basic stack organization

Most projects can get very far with just these features.

### Add Advanced Features When You Need Them

<dl>
  <dt>**Multiple Inheritance**</dt>
  <dd>When you have cross-cutting concerns that don't fit a single hierarchy (e.g., monitoring, backup, compliance)</dd>

  <dt>**Overrides**</dt>
  <dd>When you need to completely replace a setting instead of merging it (e.g., list replacement, special-case configuration)</dd>

  <dt>**Dependencies**</dt>
  <dd>When you have complex deployment orders or need to enforce component sequencing</dd>

  <dt>**Hooks**</dt>
  <dd>When you need to run custom logic before/after Atmos operations (e.g., notifications, validation, cleanup)</dd>

  <dt>**Catalogs**</dt>
  <dd>When you're building a component library for multiple teams or projects</dd>
</dl>

## Example: Advanced Stack Architecture

Here's a glimpse of what's possible with advanced stack features:

```yaml
# stacks/catalog/monitoring-mixin.yaml
components:
  terraform:
    monitoring/base:
      metadata:
        type: abstract
      vars:
        enable_cloudwatch: true
        enable_xray: true

# stacks/catalog/backup-mixin.yaml
components:
  terraform:
    backup/base:
      metadata:
        type: abstract
      vars:
        retention_days: 30
        enable_point_in_time: true

# stacks/prod-us-east-1.yaml
import:
  - catalog/monitoring-mixin
  - catalog/backup-mixin

components:
  terraform:
    app:
      metadata:
        inherits:
          - monitoring/base  # Multiple inheritance
          - backup/base
        depends_on:
          - vpc              # Explicit dependencies
          - rds
      settings:
        hooks:
          apply:
            before:
              - command: echo "Deploying prod app"
            after:
              - command: notify-slack "Deployed app to prod"
      vars:
        instance_type: m5.xlarge
```

This single stack configuration demonstrates:
- Multiple inheritance (monitoring + backup mixins)
- Explicit dependencies (vpc, rds must deploy first)
- Hooks (notifications before/after deployment)
- Clear component configuration
