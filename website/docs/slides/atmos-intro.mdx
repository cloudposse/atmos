---
title: "Scale Terraform Workflows with Atmos"
sidebar_label: "Atmos Introduction"
sidebar_position: 1
description: "Learn how Atmos helps teams manage Terraform configurations at scale with hierarchical YAML, inheritance, and workflow automation."
hide_table_of_contents: true
hide_title: true
---

import {
  SlideDeck,
  Slide,
  SlideTitle,
  SlideSubtitle,
  SlideContent,
  SlideList,
  SlideCode,
  SlideImage,
  SlideSplit,
} from '@site/src/components/SlideDeck';
import { AtmosLogo } from '@site/src/components/AtmosLogo';
import { MetallicIcon } from '@site/src/components/MetallicIcon';

<SlideDeck title="Scale Terraform Workflows with Atmos">

{/* Slide 1: Title */}
<Slide layout="title">
  <SlideTitle>Scale Terraform Workflows with Atmos</SlideTitle>
</Slide>

{/* Slide 2: Philosophy */}
<Slide layout="title">
  <SlideTitle>Businesses succeed because of their processes.</SlideTitle>
</Slide>

{/* Slide 3: Workflows */}
<Slide layout="title">
  <SlideTitle>Those processes are captured through workflows</SlideTitle>
</Slide>

{/* Slide 4: Superpowers */}
<Slide layout="title">
  <SlideTitle>Workflows give teams superpowers</SlideTitle>
  <SlideSubtitle>(without needing to be superheroes)</SlideSubtitle>
</Slide>

{/* Slide 5: Best Workflows */}
<Slide layout="content">
  <SlideTitle>The best workflows…</SlideTitle>
  <SlideList>
    <li>Can be run by anyone, anywhere (locally and in CI)</li>
    <li>Are easily understood</li>
    <li>Ensure less mistakes are made</li>
    <li>Are written down</li>
    <li>Iterated on and optimized</li>
  </SlideList>
</Slide>

{/* Slide 6: Atmos Intro */}
<Slide layout="title">
  <SlideTitle>Atmos is a workflow automation tool.</SlideTitle>
</Slide>

{/* Slide 7: Why Atmos */}
<Slide layout="title">
  <SlideTitle>But there are so many of these tools today, so why Atmos?</SlideTitle>
</Slide>

{/* Slide 8: Cloud Posse */}
<Slide layout="split">
  <SlideContent>
    <SlideTitle>Cloud Posse is DevOps Accelerator for AWS Infrastructure</SlideTitle>
    <SlideSubtitle>(typically series A-D)</SlideSubtitle>
    <p>We help our customers own their infrastructure by building it together with their teams and showing them the ropes</p>
  </SlideContent>
  <MetallicIcon src="/img/slides/atmos-intro/cloudposse-logo.svg" alt="Cloud Posse" size={350} />
</Slide>

{/* Slide 9: Built to Solve Problems */}
<Slide layout="content">
  <SlideTitle>Built to solve our problems</SlideTitle>
  <SlideList>
    <li>Needed to support many teams concurrently</li>
    <li>Needed to automate the deliverables so teams could own them</li>
    <li>Needed to be extensible and handle unknown requirements</li>
    <li>Needed it to be easy to use and stable (aka testable)</li>
  </SlideList>
</Slide>

{/* Slide 10: Atmos CLI */}
<Slide layout="split">
  <SlideContent>
    <SlideTitle>Atmos CLI: Configuration @ Scale</SlideTitle>
    <SlideList>
      <li>Hierarchical configurations reduce complexity with inheritance</li>
      <li>Enable teams to import DRY configurations from catalogs</li>
      <li>Run your workflows anywhere you can run a command</li>
      <li>Combine multiple tools into one command with custom workflows</li>
      <li>Single binary, cross compiled for every architecture</li>
    </SlideList>
    <p><a href="https://github.com/cloudposse/atmos">github.com/cloudposse/atmos</a> (golang)</p>
  </SlideContent>
  <AtmosLogo size={280} />
</Slide>

{/* Slide 11: Why YAML */}
<Slide layout="content">
  <SlideTitle>So, Why YAML?</SlideTitle>
  <SlideList>
    <li>Everyone knows YAML</li>
    <li>Simple extensible markup language for defining a declarative DSL</li>
    <li>Easily support imports, inheritance, deep merging, policies</li>
    <li>Tool agnostic (unlike HCL); Not tied to Terraform</li>
    <li>Every language can read it (even remotely, e.g. via http)</li>
    <li>Every language can write it (e.g. generate it)</li>
    <li>YAML Anchors</li>
  </SlideList>
</Slide>

{/* Slide 12: Guardrails */}
<Slide layout="content">
  <SlideTitle>We Need Guardrails</SlideTitle>
  <SlideSubtitle>Configuration at Scale Requires Policies & Validation</SlideSubtitle>
  <p>Use OPA to lay down the law and enforce it</p>
  <SlideSubtitle>Examples:</SlideSubtitle>
  <SlideList>
    <li>Never allow some value in a particular environment</li>
    <li>Never allow two things to be deployed in staging</li>
    <li>Never allow a team to deploy some component</li>
    <li>Never allow production to use unstable</li>
  </SlideList>
</Slide>

{/* Slide 13: Inheritance */}
<Slide layout="content">
  <SlideTitle>Inheritance is powerful.</SlideTitle>
  <SlideList>
    <li>Make configuration hierarchical with imports and deep merging</li>
    <li>Organize it anyway that makes sense for your organization</li>
    <li>Define logical groups of configuration</li>
    <li>Define something once and reuse it</li>
    <li>Know exactly where configuration differs</li>
  </SlideList>
</Slide>

{/* Slide 14: Generalized Tools */}
<Slide layout="content">
  <SlideTitle>But, Generalized Tools Still Suffer</SlideTitle>
  <SlideContent>
    <p>However, a general tool will always suffer for a specialized use case, even atmos and its custom workflows</p>
    <p>So that's why we wrote it in Golang</p>
    <p>And implemented opinionated workflows for the tools we use like terraform and helmfile</p>
    <p>We also acknowledged that not everyone knows go, so...</p>
  </SlideContent>
</Slide>

{/* Slide 15: Terraform Doesn't Scale */}
<Slide layout="title">
  <SlideTitle>
    Terraform by itself does not scale
    <SlideImage src="/img/slides/atmos-intro/strikethrough.png" alt="strikethrough" width={200} />
  </SlideTitle>
</Slide>

{/* Slide 16: Terraform Challenges */}
<Slide layout="split">
  <SlideContent>
    <SlideTitle>Terraform Challenges</SlideTitle>
    <SlideList>
      <li>Terraform GitOps (CI/CD) for teams is non-trivial</li>
      <li>Terraform configuration is not DRY</li>
      <li>Terraliths are a terraform anti-pattern, yet…</li>
      <li>Terraform "Root Modules" are not easily shared</li>
      <li>Terraform has no native support for multiple root modules (dependency ordering)</li>
      <li>Terraform Backend Configurations Cannot be Parameterized</li>
      <li>Terraform lacks built-in guardrails & policy controls that enterprises need</li>
    </SlideList>
  </SlideContent>
  <SlideImage src="/img/slides/atmos-intro/bomb.png" alt="Bomb" width={180} />
</Slide>

{/* Slide 17: Terraform + Atmos */}
<Slide layout="content">
  <SlideTitle>Terraform + Atmos is the answer</SlideTitle>
  <SlideList>
    <li>Opinionated workflows for terraform</li>
    <li>Established conventions and patterns to manage terraform @ scale</li>
    <li>Break terraliths into smaller pieces ("components")</li>
    <li>Enable team collaboration with catalogs and libraries</li>
    <li>Enforce guardrails with OPA and JSON Schema</li>
    <li>Zero Vendor Lock-in</li>
  </SlideList>
</Slide>

{/* Slide 18: Terminology */}
<Slide layout="content">
  <SlideTitle>Terminology</SlideTitle>
  <SlideList>
    <li><strong>Components:</strong> opinionated terraform "root modules"</li>
    <li><strong>Child modules:</strong> modules called by other modules (e.g. components)</li>
    <li><strong>Stacks:</strong> the combination of components into an architecture</li>
    <li><strong>Catalogs:</strong> collections of reusable configurations</li>
  </SlideList>
</Slide>

{/* Slide 19: Super Powers */}
<Slide layout="content">
  <SlideTitle>It Gives Terraform Super Powers</SlideTitle>
  <SlideList>
    <li>Write components (root modules) once, reuse any number of times</li>
    <li>Vanilla HCL without customizations</li>
    <li>Use our terraform provider to read YAML configurations from anywhere</li>
    <li>Easily deploy across any number of regions without touching a line of HCL</li>
    <li>Duplicate entire stacks by just copying a single YAML file</li>
    <li>Generate YAML configurations</li>
  </SlideList>
</Slide>

{/* Slide 20: Sample Stack Layout */}
<Slide layout="code">
  <SlideTitle>Sample Stack Layout</SlideTitle>
  <SlideCode language="bash">
{`stacks/
├── catalog/                      # Reusable imports
│   └── example-component.yaml    # Example default configuration
├── mixins/                       # Mixins set defaults
│   ├── us-east-1.yaml           # Example regional configuration
│   └── us-east-2.yaml
├── teams/                        # Break configurations down by team
│   ├── frontend/web.yaml
│   ├── backend/api.yaml
│   └── sre/datadog.yaml
└── orgs/                         # Some cloud organization
    └── acme/                     # ACME stacks (e.g. some AWS)
        ├── ue1-prod.yaml
        └── ue1-staging.yaml`}
  </SlideCode>
</Slide>

{/* Slide 21: Sample Component Layout */}
<Slide layout="code">
  <SlideTitle>Sample Component Layout</SlideTitle>
  <SlideCode language="bash">
{`components/
├── terraform/
│   ├── stable/
│   │   ├── vpc/
│   │   │   ├── main.tf
│   │   │   ├── variables.tf
│   │   │   ├── outputs.tf
│   │   │   └── README.md
│   │   ├── eks/
│   │   ├── ecr/
│   │   └── ...
│   └── edge/
├── helmfile/
├── ...
└── packer/`}
  </SlideCode>
</Slide>

{/* Slide 22: Stack Configurations */}
<Slide layout="code">
  <SlideTitle>Atmos "stack" configurations</SlideTitle>
  <SlideCode language="yaml">
{`import:                          # DRY configurations
  - catalog/baseline             # Shared catalogs of configuration
  - catalog/aws/account          # 100% declarative
  - catalog/aws/vpc              # Supports deep-merging &
  - catalog/aws/eks              # multiple-inheritance
  - catalog/aws/rds-aurora

components:                      # Stacks composed of many components
  terraform:                     # Easily override settings at any level
    vpc:
      component: stable/vpc
      vars:
        cidr: 10.120.0.0/22`}
  </SlideCode>
</Slide>

{/* Slide 23: Validation */}
<Slide layout="code">
  <SlideTitle>Atmos "stack" configurations</SlideTitle>
  <SlideCode language="yaml">
{`components:                      # Stacks composed of many components
  terraform:                     # Easily override settings at any level
    vpc:
      component: stable/vpc
      settings:                  # Validation: Supports JSON Schema and OPA policies
        validation:              # All validation steps must succeed
          check-akamai-property-component-with-opa-policy:
            schema_type: opa
            schema_path: validate-akamai-property-component.rego
            description: Check 'akamai-property' against OPA policy
      vars:
        cidr: 10.120.0.0/22`}
  </SlideCode>
</Slide>

{/* Slide 24: Workflows */}
<Slide layout="code">
  <SlideTitle>Atmos "workflows" configurations</SlideTitle>
  <SlideCode language="yaml">
{`# User would run: atmos workflow eks-up -s acme-ue1-dev

workflows:
  eks-up:
    description: |
      Run 'terraform apply' to bring up EKS
    steps:
      - command: terraform apply vpc
      - command: terraform apply eks
      - command: terraform apply eks/alb-controller`}
  </SlideCode>
</Slide>

{/* Slide 25: Custom Commands */}
<Slide layout="code">
  <SlideTitle>Atmos "subcommand" configurations</SlideTitle>
  <SlideCode language="yaml">
{`# Custom CLI commands
# This adds: atmos terraform generate graph vpc -s acme-ue1-staging

commands:
  - name: terraform
    description: Terraform commands
    commands:
      - name: generate graph
        description: Generate a PNG graph of the terraform resources
        arguments:
          - name: component
            description: Name of the component
        flags:
          - name: stack
            shorthand: s
            description: Stack name
            required: true`}
  </SlideCode>
</Slide>

{/* Slide 26: Summary */}
<Slide layout="content">
  <SlideTitle>Summary</SlideTitle>
  <SlideList>
    <li>Businesses need to capture their processes as workflows</li>
    <li>Terraform configuration is difficult to manage at scale</li>
    <li>Terraform by itself is not enough to be successful</li>
    <li>Atmos makes managing those configurations easier</li>
  </SlideList>
</Slide>

{/* Slide 27: Open Source */}
<Slide layout="content">
  <SlideTitle>It's Open Source (APACHE2)</SlideTitle>
  <SlideContent>
    <p>Best of all it's open source and has a community.</p>
    <p>It's Open Source too, with no strings attached and under active development and hundreds of stars.</p>
    <p>We have built an ecosystem of tools and modules downloaded tens of millions of times.</p>
    <p>We invite you to join us!</p>
  </SlideContent>
</Slide>

</SlideDeck>
