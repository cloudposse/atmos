---
title: atmos helmfile source
sidebar_label: source
sidebar_class_name: command
id: source
description: Manage helmfile component sources with JIT vendoring
---
import Intro from '@site/src/components/Intro'
import Screengrab from '@site/src/components/Screengrab'
import DocCardList from '@theme/DocCardList'
import ActionCard from '@site/src/components/ActionCard'
import PrimaryCTA from '@site/src/components/PrimaryCTA'

<Intro>
Use these commands to manage Helmfile component sources with just-in-time (JIT) vendoring. This enables components to declare their source location inline using the top-level `source` field without requiring a separate `component.yaml` file.
</Intro>

<ActionCard title="Source-Based Version Pinning">
    Learn how to use the source field for native per-environment version control directly in stack configuration.
    <div>
      <PrimaryCTA to="/design-patterns/version-management/source-based-versioning">Design Pattern</PrimaryCTA>
    </div>
</ActionCard>

<Screengrab title="atmos helmfile source --help" slug="atmos-helmfile-source--help" />

## Usage

```shell
atmos helmfile source <subcommand> [options]
```

## Subcommands

<DocCardList />

## How It Works

The source provisioner enables just-in-time vendoring of Helmfile components directly from stack configuration. Instead of pre-vendoring components or maintaining separate `component.yaml` files, you can declare the source inline:

```yaml
# stacks/dev.yaml
components:
  helmfile:
    ingress-nginx:
      source:
        uri: github.com/cloudposse/helmfiles//releases/ingress-nginx
        version: 1.0.0
        included_paths:
          - "*.yaml"
          - "values/**"
        excluded_paths:
          - "*.md"
          - "tests/**"
      vars:
        namespace: ingress-nginx
```

When you run `atmos helmfile source pull ingress-nginx --stack dev`, Atmos:

1. **Reads Configuration** - Extracts `source` from the component's stack manifest.
2. **Resolves Source** - Parses the go-getter compatible URI with optional version.
3. **Downloads Content** - Fetches the source using go-getter (supports git, s3, http, oci, etc.).
4. **Filters Files** - Applies `included_paths` and `excluded_paths` patterns.
5. **Copies to Target** - Places files in the component directory.

## Source Specification

The `source` field supports two formats:

### String Format (Simple)

For simple cases, use a go-getter URI string:

```yaml
source: "github.com/cloudposse/helmfiles//releases/ingress-nginx?ref=1.0.0"
```

### Map Format (Full Control)

For more control, use a map with explicit fields:

```yaml
source:
  uri: github.com/cloudposse/helmfiles//releases/ingress-nginx
  version: 1.0.0
  included_paths:
    - "*.yaml"
    - "values/**"
  excluded_paths:
    - "*.md"
    - "tests/**"
```

### Source Fields

<dl>
  <dt>`uri`</dt>
  <dd>Go-getter compatible source URI. Supports git, s3, http, gcs, oci, and other protocols.</dd>

  <dt>`version`</dt>
  <dd>Version tag, branch, or commit. Appended as `?ref=<version>` for git sources.</dd>

  <dt>`included_paths`</dt>
  <dd>Glob patterns for files to include. If specified, only matching files are copied.</dd>

  <dt>`excluded_paths`</dt>
  <dd>Glob patterns for files to exclude. Applied after included_paths filtering.</dd>

  <dt>`retry`</dt>
  <dd>
  Optional retry configuration for handling transient network errors during download.

  ```yaml
  retry:
    max_attempts: 5
    initial_delay: 2s
    max_delay: 60s
    backoff_strategy: exponential
  ```
  </dd>
</dl>

## Examples

### Vendor a Component

Download and vendor a component source:

```shell
atmos helmfile source pull ingress-nginx --stack dev
```

### Force Re-vendor

Force re-download even if the component directory exists:

```shell
atmos helmfile source pull ingress-nginx --stack dev --force
```

### View Source Configuration

Display the source configuration for a component:

```shell
atmos helmfile source describe ingress-nginx --stack dev
```

### Delete Vendored Source

Remove the vendored component directory (requires --force for safety):

```shell
atmos helmfile source delete ingress-nginx --stack dev --force
```

## Arguments

<dl>
  <dt>`component`</dt>
  <dd>The Atmos component name (required for pull, describe, delete)</dd>
</dl>

## Flags

<dl>
  <dt>`--stack` / `-s`</dt>
  <dd>Atmos stack name (required). Can also be set via `ATMOS_STACK` environment variable.</dd>

  <dt>`--identity` / `-i`</dt>
  <dd>Identity to use for authentication when downloading from protected sources.</dd>

  <dt>`--force` / `-f`</dt>
  <dd>Force re-vendor even if component directory exists (pull command), or confirm deletion (delete command).</dd>
</dl>

## See Also

- [Source-Based Version Pinning](/design-patterns/version-management/source-based-versioning) — Design pattern for per-environment version management
- [Stack Configuration](/learn/stacks) — Learn about Atmos stacks
- [Vendoring](/vendor) — Pre-vendor components for immutability and audit trails
- [`atmos vendor pull`](/cli/commands/vendor/pull) — Traditional component vendoring
