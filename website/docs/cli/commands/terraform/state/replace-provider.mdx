---
title: atmos terraform state replace-provider
sidebar_label: state replace-provider
sidebar_class_name: command
id: replace-provider
description: Replace provider in the state.
---
import Intro from '@site/src/components/Intro'
import Screengrab from '@site/src/components/Screengrab'

<Intro>
Use this command to replace a provider in the Terraform state for an Atmos component in a stack.
</Intro>

<Screengrab title="atmos terraform state replace-provider --help" slug="atmos-terraform-state-replace-provider--help" />

## Usage

Execute the `terraform state replace-provider` command like this:

```shell
atmos terraform state replace-provider <component> -s <stack> <from-provider> <to-provider> [options]
```

This command replaces the provider source for all resources managed by the specified provider. This is useful when a provider has been renamed, moved to a different namespace, or forked.

:::caution
State manipulation commands should be used carefully. Always back up your state before making changes.
:::

:::tip
Run `atmos terraform state replace-provider --help` to see all the available options
:::

## Examples

```shell
# Replace a provider namespace
atmos terraform state replace-provider vpc -s dev \
  "registry.terraform.io/-/aws" \
  "registry.terraform.io/hashicorp/aws"

# Replace a forked provider
atmos terraform state replace-provider vpc -s dev \
  "registry.terraform.io/hashicorp/aws" \
  "registry.terraform.io/my-org/aws"
```

## Arguments

<dl>
    <dt>`component` <em>(required)</em></dt>
    <dd>
        Atmos terraform component.
    </dd>

    <dt>`from-provider` <em>(required)</em></dt>
    <dd>
        The source provider address to replace (e.g., `registry.terraform.io/-/aws`).
    </dd>

    <dt>`to-provider` <em>(required)</em></dt>
    <dd>
        The target provider address to replace with (e.g., `registry.terraform.io/hashicorp/aws`).
    </dd>
</dl>

## Flags

<dl>
    <dt>`--stack` <em>(alias `-s`)</em> <em>(required)</em></dt>
    <dd>
        Atmos stack.
    </dd>

    <dt>`--dry-run` <em>(optional)</em></dt>
    <dd>
        Show what would be executed without actually running the command.

        ```shell
        atmos terraform state replace-provider vpc -s dev --dry-run old-provider new-provider
        ```
    </dd>

    <dt>`--skip-init` <em>(optional)</em></dt>
    <dd>
        Skip running `terraform init` before executing the command.

        ```shell
        atmos terraform state replace-provider vpc -s dev --skip-init old-provider new-provider
        ```
    </dd>
</dl>

Additional native Terraform flags such as `-auto-approve` and `-lock` are passed through to Terraform.

## See Also

- [`atmos terraform state`](/cli/commands/terraform/state) - State management overview
- [`atmos terraform state mv`](/cli/commands/terraform/state/mv) - Move an item in the state
- [`atmos terraform state list`](/cli/commands/terraform/state/list) - List resources in the state
