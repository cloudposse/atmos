---
title: atmos devcontainer
sidebar_label: devcontainer
sidebar_class_name: command
id: devcontainer
description: Manage development containers for Atmos workflows
---
import Screengrab from '@site/src/components/Screengrab'
import Intro from '@site/src/components/Intro'

<Intro>
Use this command to manage development containers (devcontainers) for your Atmos workflows.

Devcontainers provide isolated, reproducible development environments with all required tools and dependencies pre-configured.
</Intro>

<Screengrab title="atmos devcontainer --help" slug="atmos-devcontainer--help" />

## Prerequisites

### Container Runtime Required

Atmos devcontainers require either **Docker** or **Podman** to be installed and running on your system.

#### Docker

**Installation:**
- **macOS**: [Docker Desktop for Mac](https://docs.docker.com/desktop/install/mac-install/)
- **Windows**: [Docker Desktop for Windows](https://docs.docker.com/desktop/install/windows-install/)
- **Linux**: [Docker Engine](https://docs.docker.com/engine/install/)

**Starting Docker:**
```bash
# macOS/Windows: Start Docker Desktop application
# Linux:
sudo systemctl start docker
sudo systemctl enable docker  # Enable on boot
```

#### Podman (Recommended for Linux)

**Installation:**
- **macOS**: `brew install podman` ([Podman Desktop](https://podman-desktop.io/))
- **Windows**: [Podman Desktop for Windows](https://podman.io/docs/installation#windows)
- **Linux**:
  - **Ubuntu/Debian**: `sudo apt-get install podman`
  - **Fedora/RHEL**: `sudo dnf install podman`
  - **Arch**: `sudo pacman -S podman`

**Starting Podman:**
```bash
# macOS/Windows with Podman Desktop
podman machine init
podman machine start

# Linux (rootless mode - no daemon required)
# Podman runs without a daemon on Linux
```

#### Verification

Verify your container runtime is working:

```bash
# For Docker:
docker --version
docker ps

# For Podman:
podman --version
podman ps
```

### Runtime Selection

Atmos automatically detects the available container runtime:
1. Checks for Docker first
2. Falls back to Podman if Docker is unavailable
3. You can override with `ATMOS_CONTAINER_RUNTIME=docker` or `ATMOS_CONTAINER_RUNTIME=podman`

## Usage

```shell
atmos devcontainer <subcommand> [options]
```

## Subcommands

- [`list`](/cli/commands/devcontainer/list) - List available devcontainers
- [`start`](/cli/commands/devcontainer/start) - Start a devcontainer
- [`stop`](/cli/commands/devcontainer/stop) - Stop a running devcontainer
- [`attach`](/cli/commands/devcontainer/attach) - Attach to a running devcontainer
- [`exec`](/cli/commands/devcontainer/exec) - Execute a command in a running devcontainer
- [`logs`](/cli/commands/devcontainer/logs) - Show logs from a devcontainer
- [`config`](/cli/commands/devcontainer/config) - Show devcontainer configuration
- [`rebuild`](/cli/commands/devcontainer/rebuild) - Rebuild a devcontainer from scratch
- [`remove`](/cli/commands/devcontainer/remove) - Remove a devcontainer

## Container Runtimes

Atmos supports both Docker and Podman as container runtimes:

- **Auto-detection**: Atmos automatically detects the available runtime (Docker first, then Podman)
- **Explicit selection**: Set `ATMOS_CONTAINER_RUNTIME=docker` or `ATMOS_CONTAINER_RUNTIME=podman`
- **Per-devcontainer**: Configure runtime in `atmos.yaml` under `devcontainer.<name>.settings.runtime`

## Configuration

Devcontainers are configured in `atmos.yaml` under the `devcontainer` section:

```yaml
components:
  devcontainer:
    geodesic:
      settings:
        runtime: podman  # Optional: docker, podman, or omit for auto-detect
      spec: !include devcontainer.json
```

The `spec` field follows the [VS Code Dev Container specification](https://containers.dev/implementors/json_reference/).

## Output Masking

Devcontainer commands are fully integrated with Atmos's pattern-based masking system. All output from containers—including command execution, logs, and interactive shell sessions—is automatically processed through the masking framework.

### How It Works

- **Automatic Masking**: Masks configured in `atmos.yaml` under `settings.terminal.mask.patterns` apply to all devcontainer output
- **Secure by Default**: Sensitive data (credentials, tokens, secrets) is automatically redacted in output
- **Interactive Sessions**: Even interactive shell sessions (`atmos devcontainer attach`) use masked IO channels

### Configuration

Masking is **enabled by default** and can be controlled in three ways:

#### 1. Command-Line Flag

```shell
# Disable masking for a specific command
atmos devcontainer logs geodesic --mask=false

# Enable masking explicitly (default behavior)
atmos devcontainer exec geodesic -- env --mask=true
```

#### 2. Environment Variable

```shell
# Disable masking globally
export ATMOS_MASK=false
atmos devcontainer attach geodesic

# Enable masking globally (default)
export ATMOS_MASK=true
```

#### 3. Configuration File

Configure masking behavior in `atmos.yaml`:

```yaml
settings:
  terminal:
    mask:
      enabled: true  # Enable/disable masking globally
      patterns:
        # Add custom patterns to mask
        - name: "AWS Account ID"
          pattern: '\b\d{12}\b'
        - name: "Custom Secret"
          pattern: 'secret-[a-zA-Z0-9]+'
```

### Use Cases

- **CI/CD Pipelines**: Ensure secrets aren't leaked in build logs when running commands in containers
- **Debugging**: Temporarily disable masking with `--mask=false` when troubleshooting
- **Security Compliance**: Automatically redact sensitive patterns in all container output

:::tip
The masking system processes output in real-time without buffering, ensuring both security and performance for long-running container operations.
:::

## Examples

```shell
# List all devcontainers
atmos devcontainer list

# Start a devcontainer
atmos devcontainer start geodesic

# Start and attach in one command
atmos devcontainer start geodesic --attach

# Attach to a running devcontainer
atmos devcontainer attach geodesic

# Show logs
atmos devcontainer logs geodesic

# Rebuild a devcontainer
atmos devcontainer rebuild geodesic

# Stop a devcontainer
atmos devcontainer stop geodesic

# Remove a devcontainer
atmos devcontainer remove geodesic
```

## See Also

- [Dev Container Specification](https://containers.dev/)
- [Atmos Components](/core-concepts/components)
