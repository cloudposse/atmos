---
title: atmos devcontainer
sidebar_label: devcontainer
sidebar_class_name: command
id: devcontainer
description: Manage development containers for Atmos workflows
---
import Screengrab from '@site/src/components/Screengrab'
import Intro from '@site/src/components/Intro'
import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'
import DocCardList from '@theme/DocCardList'

<Intro>
Use this command to manage development containers (devcontainers) for your Atmos workflows.

Devcontainers provide isolated, reproducible development environments with all required tools and dependencies pre-configured.
</Intro>

<Screengrab title="atmos devcontainer --help" slug="atmos-devcontainer--help" />

## Prerequisites

### Container Runtime Required

Atmos devcontainers require either **Docker** or **Podman** to be installed and running on your system.

<Tabs queryString="runtime">
  <TabItem value="docker" label="Docker" default>
    #### Installation

    <Tabs groupId="operating-systems">
      <TabItem value="macos" label="macOS" default>
        Install [Docker Desktop for Mac](https://docs.docker.com/desktop/install/mac-install/)

        ```bash
        # Or via Homebrew
        brew install --cask docker
        ```

        **Start Docker Desktop** from Applications or Launchpad.
      </TabItem>

      <TabItem value="windows" label="Windows">
        Install [Docker Desktop for Windows](https://docs.docker.com/desktop/install/windows-install/)

        **Start Docker Desktop** from the Start menu.
      </TabItem>

      <TabItem value="linux" label="Linux">
        Install [Docker Engine](https://docs.docker.com/engine/install/) for your distribution.

        ```bash
        # Ubuntu/Debian
        sudo apt-get update
        sudo apt-get install docker-ce docker-ce-cli containerd.io

        # Fedora/RHEL
        sudo dnf install docker-ce docker-ce-cli containerd.io

        # Start and enable Docker
        sudo systemctl start docker
        sudo systemctl enable docker
        ```
      </TabItem>
    </Tabs>

    #### Verification

    ```bash
    docker --version
    docker ps
    ```
  </TabItem>

  <TabItem value="podman" label="Podman">
    #### Installation

    <Tabs groupId="operating-systems">
      <TabItem value="macos" label="macOS" default>
        ```bash
        brew install podman
        ```

        Or install [Podman Desktop](https://podman-desktop.io/) for GUI management.

        **Initialize and start Podman machine:**
        ```bash
        podman machine init
        podman machine start
        ```
      </TabItem>

      <TabItem value="windows" label="Windows">
        Install [Podman Desktop for Windows](https://podman.io/docs/installation#windows)

        **Initialize and start Podman machine:**
        ```bash
        podman machine init
        podman machine start
        ```
      </TabItem>

      <TabItem value="linux" label="Linux">
        ```bash
        # Ubuntu/Debian
        sudo apt-get install podman

        # Fedora/RHEL
        sudo dnf install podman

        # Arch
        sudo pacman -S podman
        ```

        **Note:** Podman runs rootless on Linux - no daemon required.
      </TabItem>
    </Tabs>

    #### Verification

    ```bash
    podman --version
    podman ps
    ```
  </TabItem>
</Tabs>

### Runtime Selection

Atmos automatically detects the available container runtime:
1. Checks for Docker first
2. Falls back to Podman if Docker is unavailable
3. You can override with `ATMOS_CONTAINER_RUNTIME=docker` or `ATMOS_CONTAINER_RUNTIME=podman`

## Usage

```shell
atmos devcontainer <subcommand> [options]
```

## Subcommands

<DocCardList />

## Container Runtimes

Atmos supports both Docker and Podman as container runtimes:

- **Auto-detection**: Atmos automatically detects the available runtime (Docker first, then Podman)
- **Explicit selection**: Set `ATMOS_CONTAINER_RUNTIME=docker` or `ATMOS_CONTAINER_RUNTIME=podman`
- **Per-devcontainer**: Configure runtime in `atmos.yaml` under `devcontainer.<name>.settings.runtime`

## Configuration

Devcontainers are configured in `atmos.yaml` under the `devcontainer` section:

```yaml
components:
  devcontainer:
    <name>:  # Choose any name for your devcontainer (e.g., geodesic, terraform, python)
      settings:
        runtime: podman  # Optional: docker, podman, or omit for auto-detect
      spec: !include devcontainer.json
```

**Example with `geodesic`:**
```yaml
components:
  devcontainer:
    geodesic:
      spec: !include devcontainer.json
```

The `<name>` is a user-defined identifier you choose for your devcontainer. Use it with commands like `atmos devcontainer start <name>`.

The `spec` field follows the [VS Code Dev Container specification](https://containers.dev/implementors/json_reference/).

## Output Masking

Devcontainer commands are fully integrated with Atmos's pattern-based masking system. All output from containers—including command execution, logs, and interactive shell sessions—is automatically processed through the masking framework.

### How It Works

- **Automatic Masking**: Masks configured in `atmos.yaml` under `settings.terminal.mask.patterns` apply to all devcontainer output
- **Secure by Default**: Sensitive data (credentials, tokens, secrets) is automatically redacted in output
- **Interactive Sessions**: Even interactive shell sessions (`atmos devcontainer attach`) use masked IO channels

### Configuration

Masking is **enabled by default** and can be controlled in three ways:

#### 1. Command-Line Flag

```shell
# Disable masking for a specific command
atmos devcontainer logs geodesic --mask=false

# Enable masking explicitly (default behavior)
atmos devcontainer exec geodesic -- env --mask=true
```

#### 2. Environment Variable

```shell
# Disable masking globally
export ATMOS_MASK=false
atmos devcontainer attach geodesic

# Enable masking globally (default)
export ATMOS_MASK=true
```

#### 3. Configuration File

Configure masking behavior in `atmos.yaml`:

```yaml
settings:
  terminal:
    mask:
      enabled: true  # Enable/disable masking globally
      patterns:
        # Add custom patterns to mask
        - name: "AWS Account ID"
          pattern: '\b\d{12}\b'
        - name: "Custom Secret"
          pattern: 'secret-[a-zA-Z0-9]+'
```

### Use Cases

- **CI/CD Pipelines**: Ensure secrets aren't leaked in build logs when running commands in containers
- **Debugging**: Temporarily disable masking with `--mask=false` when troubleshooting
- **Security Compliance**: Automatically redact sensitive patterns in all container output

:::tip
The masking system processes output in real-time without buffering, ensuring both security and performance for long-running container operations.
:::

## Examples

```shell
# List all devcontainers
atmos devcontainer list

# Start a devcontainer
atmos devcontainer start geodesic

# Start and attach in one command
atmos devcontainer start geodesic --attach

# Attach to a running devcontainer
atmos devcontainer attach geodesic

# Show logs
atmos devcontainer logs geodesic

# Rebuild a devcontainer
atmos devcontainer rebuild geodesic

# Stop a devcontainer
atmos devcontainer stop geodesic

# Remove a devcontainer
atmos devcontainer remove geodesic
```

## See Also

- [Dev Container Specification](https://containers.dev/)
- [Atmos Components](/core-concepts/components)
