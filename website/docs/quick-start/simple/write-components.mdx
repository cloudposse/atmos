---
title: Write Some Components
sidebar_position: 3
sidebar_label: 3. Write Some Components
---
import EmbedFile from '@site/src/components/EmbedFile'
import KeyPoints from '@site/src/components/KeyPoints'
import Screengrab from '@site/src/components/Screengrab'
import LatestRelease from '@site/src/components/LatestRelease'
import Step from '@site/src/components/Step'
import StepNumber from '@site/src/components/StepNumber'
import Intro from '@site/src/components/Intro'
import ActionCard from '@site/src/components/ActionCard'
import PrimaryCTA from '@site/src/components/PrimaryCTA'

<Intro>
When you [design cloud architectures with Atmos](/quick-start/mindset), you will first break them apart into pieces called [components](/core-concepts/components). Then, you will implement [Terraform "root modules"](/core-concepts/components/terraform) for each of those components.
</Intro>

After we're done with this, we'll show you [how you connect your components using stacks](/quick-start/simple/configure-stacks), so that everything comes together.

<KeyPoints>
- Where to put your components
- How to think about components
- How to use Terraform "root modules" as components
</KeyPoints>

<Step>

<Step>
## <StepNumber/> Decide what your component should do

Once we consider our infrastructure in terms of components, we need to determine the specific functions each component must perform.

We recommend following the [Single Responsibility Principle (SRP)](https://en.wikipedia.org/wiki/Single-responsibility_principle). That is, design components to serve a single purpose, making them the smallest possible unit of infrastructure in a typical software development lifecycle (SDLC). Group pieces usually change together as one component and separate those that change independently (or seldom).

We discuss some of the [best practices for components](/best-practices/components) in our documentation.

In this case, since our goal is to retrieve the current weather, let's create a component that will do just that.

</Step>

## <StepNumber/> Create a Directory for Your Component

The implementation for the component (e.g. HCL code) will be stored in a directory under the `components/` folder corresponding to the toolchain used (e.g. `terraform/`). For Terraform, place your component in the `components/terraform` directory. Inside this directory, create a folder to store your component’s Terraform code, which serves as the root module. Since our component is a simple Terraform root module, we will create a directory called `weather` to store the Terraform code for our weather component.

```bash
mkdir -p components/terraform/weather
```

</Step>


<Step>
## <StepNumber/> Write a Terraform Root Module

To write our Terraform root module, we’ll follow Terraform's standard conventions:
<dl>
  <dt>`variables.tf`</dt>
  <dd>Defines variables</dd>

  <dt>`outputs.tf`</dt>
  <dd>Defines outputs</dd>

  <dt>`versions.tf`</dt>
  <dd>Specifies required provider versions</dd>

  <dt>`providers.tf`</dt>
  <dd>Specifies providers</dd>

  <dt>`main.tf`</dt>
  <dd>Implements main functionality</dd>
</dl>

With Atmos, you use native HCL Terraform code without any special extensions to the language.

To make the best use of Atmos, ensure your root modules are highly reusable, so they should accept parameters so it can be deployed multiple times without conflicts. This means provisioning resources with unique names.


<details>
<summary>How do we recommend ensuring unique resource names?</summary>

Cloud Posse's [`terraform-null-label`](https://github.com/cloudposse/terraform-null-label) module makes this easier by turning naming into a standardized, programmatically enforced convention. Setting the null label parameters ensures unique resource names and enforces consistency across your team and organization.

__NOTE:__ In our example, we will keep it simple to focus on the basics, so we will not use this module.
</details>


<ActionCard title="Want to go deeper on this topic?">
    Terraform "root modules" implement the stateful pieces of your infrastructure. Learn how to use them effectively with Atmos.
    <PrimaryCTA to="/core-concepts/components/terraform">Terraform Root Modules</PrimaryCTA>
</ActionCard>

</Step>

