---
title: Configure Atmos CLI
sidebar_position: 2
sidebar_label: Configure Atmos CLI
---
import EmbedFile from '@site/src/components/EmbedFile';

In the previous step, we've decided on the following:

- Use a monorepo to configure and provision a Terraform "root module" component
- Configured the project's filesystem layout for the infrastructure monorepo

Now, we should configure `atmos.yaml` to tell Atmos where to find the Terraform components and Atmos stacks (because everything is configurable!)

The `atmos.yaml` configuration file is used to control the behavior of the `atmos` CLI. The file supports many features that are configured in different
sections of the `atmos.yaml` file. For the description of all the sections, refer to [CLI Configuration](/cli/configuration).

For the purpose of this Quick Start, below is the minimum recommended configuration for Atmos to work with Terraform and to
configure [Atmos components](/core-concepts/components) and [Atmos stacks](/core-concepts/stacks). Copy the YAML config below into your `atmos.yaml`
file.

<br/>

<EmbedFile filePath="examples/demo-stacks/atmos.yaml" />

<br/>

The `atmos.yaml` configuration file defines the following sections.

__NOTE:__ below is the description of the sections relevant to this Quick Start guide. For the description of all the sections, refer
to [CLI Configuration](/cli/configuration).

### Configure Paths
<dl>
  <dt>base_path</dt>
  <dd>The base path for components, stacks, and workflows configurations. We set it to an empty string because we've decided to use the ENV var `ATMOS_BASE_PATH` to point to the absolute path of the root of the repo</dd>

  <dt>components.terraform.base_path</dt>
  <dd>The base path to the Terraform components (Terraform root modules). As described in [Configure Repository](/quick-start/advanced/configure-repository), we've decided to put the Terraform components into the `components/terraform` directory, and this setting tells Atmos where to find them. Atmos will join the base path (set in the `ATMOS_BASE_PATH` ENV var) with `components.terraform.base_path` to calculate the final path to the Terraform components</dd>

  <dt>stacks.base_path</dt>
  <dd>The base path to the Atmos stacks. As described in [Configure Repository](/quick-start/advanced/configure-repository), we've decided to put the stack configurations into the `stacks` directory, and this setting tells Atmos where to find them. Atmos will join the base path (set in the `ATMOS_BASE_PATH` ENV var) with `stacks.base_path` to calculate the final path to the stacks</dd>

  <dt>stacks.included_paths</dt>
  <dd>List of file paths to the top-level stacks in the `stacks` directory to include in search when Atmos searches for the stack where the component is defined when executing `atmos` commands</dd>

  <dt>stacks.excluded_paths</dt>
  <dd>List of file paths to the top-level stacks in the `stacks` directory to exclude from search when Atmos searches for the stack where the component is defined when executing `atmos` commands</dd>

  <dt>workflows.base_path</dt>
  <dd>The base path to Atmos [Workflows](/core-concepts/workflows) files</dd>
</dl>

### Other Options
<dl>
  <dt>stacks.name_pattern</dt>
  <dd>
    Atmos stack name pattern. When executing `atmos` commands, Atmos does not use the configuration file names and their
    filesystem locations to search for the stack where the component is defined. Instead, Atmos uses the context
    variables (`namespace`, `tenant`, `environment`, `stage`) to search for the stack. The stack config file names can be anything, and they can be in
    any folder in any sub-folder in the `stacks` directory. For example, when executing the `atmos terraform apply vpc -s tenant1-ue2-dev`
    command, the stack `tenant1-ue2-dev` is specified by the `-s` flag. By looking at `name_pattern: "{tenant}-{environment}-{stage}"` and processing
    the tokens, Atmos knows that the first part of the stack name is `tenant`, the second part is `environment`, and the third part is `stage`. Then
    Atmos searches for the stack configuration file (in the `stacks` directory) where `tenant: tenant1`, `environment: ue2` and `stage: dev` are
    defined (inline or via imports)
  </dd>

  <dt>logs.verbose</dt>
  <dd>
    Set to `true` to increase log verbosity. When set to `true`, Atmos prints to the console all the steps it takes to find and
    process the `atmos.yaml` CLI config file, and all the steps it takes to find the stack and find and process the component in the stack
  </dd>
</dl>


<details>
<summary>Advanced Options</summary>
<dl>
  <dt>components.terraform.apply_auto_approve</dt>
  <dd>if set to `true`, Atmos automatically adds the `-auto-approve` option to instruct Terraform to apply the plan without 
  asking for confirmation when executing `terraform apply` command</dd>

  <dt>`components.terraform.deploy_run_init`</dt>
  <dd>if set to `true`, Atmos runs `terraform init` before executing [`atmos terraform deploy`](/cli/commands/terraform/deploy) command</dd>

  <dt>`components.terraform.init_run_reconfigure`</dt>
  <dd>if set to `true`, Atmos automatically adds the `-reconfigure` option to update the backend configuration when executing `terraform init` command</dd>

  <dt>`components.terraform.auto_generate_backend_file`</dt>
  <dd>if set to `true`, Atmos automatically generates the Terraform backend file from the component configuration when executing `terraform plan` and `terraform apply` commands</dd>

  <dt>`commands`</dt>
  <dd>configuration for [Atmos Custom Commands](/core-concepts/custom-commands)</dd>

  <dt>`schemas`</dt>
  <dd>
  [JSON Schema](https://json-schema.org/) and [OPA Policy](https://www.openpolicyagent.org/) configurations for:
  - [Atmos Manifests Validation](/cli/schemas)
  - [Atmos Components Validation](/core-concepts/validate/components)
  </dd>
</dl>

</details>


