---
slug: terraform-provider-development
title: "Developing Custom Terraform Providers with Atmos"
authors: [atmos]
tags: [feature, terraform, providers]
date: 2025-10-30
---

Atmos now documents how to test custom Terraform providers locally using Terraform's development overrides feature, enabling rapid iteration without publishing development versions to a registry.

<!--truncate-->

## The Problem

When developing custom Terraform providers, the standard workflow requires publishing each version to a registry before testing. This creates several issues:

- Publishing development versions for each change is time-consuming
- Test versions clutter your registry
- Breaking changes are difficult to test before release
- Iteration cycles are slow

## The Solution

Terraform provides a development overrides feature through its CLI configuration that allows pointing to locally-built provider binaries. This works seamlessly with Atmos components.

## How It Works

Development overrides use two separate mechanisms that work together:

### 1. Provider Binary Location (Terraform CLI Config)

Create a `.terraformrc` file in your component directory:

```hcl
provider_installation {
  dev_overrides {
    "registry.terraform.io/myorg/myprovider" = "/absolute/path/to/provider/bin"
  }
  direct {}
}
```

This tells Terraform where to find your locally-built provider binary instead of downloading it from a registry.

### 2. Provider Configuration (Atmos Stack Manifests)

Configure provider behavior using the `providers` section in your stack manifests as usual:

```yaml
components:
  terraform:
    myapp:
      providers:
        myprovider:
          endpoint: "https://api.example.com"
          api_token: "{{ .settings.api_token }}"

      env:
        TF_CLI_CONFIG_FILE: ".terraformrc"
```

Atmos continues to generate `providers_override.tf.json` for provider configuration, while Terraform uses your local binary via `dev_overrides`.

## Setup Steps

**1. Place `.terraformrc` in your component directory**

The file must be in the component folder (e.g., `components/terraform/myapp/.terraformrc`) because Atmos executes Terraform from within the component directory.

**2. Set the environment variable**

Point Terraform to your CLI config using the `env` section:

```yaml
env:
  TF_CLI_CONFIG_FILE: ".terraformrc"
```

**3. Build your provider**

```bash
cd providers/terraform-provider-myprovider
go build -o terraform-provider-myprovider
mkdir -p bin
mv terraform-provider-myprovider bin/
```

**4. Test with Atmos**

```bash
atmos terraform plan myapp -s dev
```

Terraform uses your local provider binary while Atmos handles configuration as usual.

## Development Workflow

```bash
# Edit provider code
vim providers/terraform-provider-myprovider/provider.go

# Build provider binary
cd providers/terraform-provider-myprovider
./build.sh

# Test immediately with Atmos
cd ../infrastructure
atmos terraform plan myapp -s dev
```

No publishing required. Changes are available immediately.

## Important Details

### Component-Level Configuration

The `.terraformrc` file must be in the component directory, not the repository root. Add it to your component's `.gitignore`:

```
# components/terraform/myapp/.gitignore
.terraformrc
```

Provide a `.terraformrc.example` template for team members with placeholder paths they can update for their environment.

### CLI Config Requirements

The `provider_installation` block must be in a Terraform CLI configuration file. It cannot be defined in `.tf` files like `providers.tf` because it's a CLI-level setting.

### Absolute Paths Required

The path in `dev_overrides` must be an absolute path to the directory containing the provider binary (not the binary itself).

### Warning Message

When dev_overrides are active, Terraform shows a warning:

```
Warning: Provider development overrides are in effect
```

This confirms your local provider is being used. Remove the `dev_overrides` block when ready to use published versions.

## Use Cases

This approach is useful when:

- Developing new providers from scratch
- Adding features to existing providers
- Testing breaking changes before release
- Debugging provider issues
- Contributing to open-source providers

## Documentation

We've added comprehensive documentation covering:

- Complete setup instructions
- Best practices for team collaboration
- Real-world examples
- Troubleshooting guide
- Design pattern for provider development workflows

See the full documentation:
- [Provider Configuration Guide](/core-concepts/components/terraform/providers)
- [Provider Development Pattern](/design-patterns/provider-development)

## Get Involved

- [GitHub Issue #1726](https://github.com/cloudposse/atmos/issues/1726)
- [Documentation PR #1730](https://github.com/cloudposse/atmos/pull/1730)
- Join the [Atmos Community Slack](https://cloudposse.com/slack)
