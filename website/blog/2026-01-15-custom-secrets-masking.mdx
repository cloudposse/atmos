---
slug: custom-secrets-masking
title: "Custom Secrets Masking Patterns"
authors: [osterman]
tags: [feature, security]
---

Configure custom regex patterns and literal values in `atmos.yaml` to automatically mask sensitive data across all CLI output channels.

{/* truncate */}

## What Changed

Atmos already includes 120+ built-in secret patterns from the Gitleaks library for automatic masking. Now you can extend this with your own patterns:

- **Custom regex patterns**: Define patterns for internal tokens, API keys, or organization-specific secrets
- **Literal values**: Exact string matches for known sensitive values
- **Configurable replacement**: Customize the masked output string (default: `***MASKED***`)
- **Comprehensive coverage**: Secrets are masked in terraform output, shell commands, logs, and error messages

## Configuration

Add custom patterns to your `atmos.yaml`:

```yaml
settings:
  terminal:
    mask:
      enabled: true
      replacement: "[REDACTED]"
      patterns:
        - 'demo-key-[A-Za-z0-9]{16}'
        - 'internal-[a-f0-9]{32}'
        - 'tkn_(live|test)_[a-zA-Z0-9]{24}'
      literals:
        - "super-secret-demo-value"
        - "my-api-key-12345"
```

## Why This Matters

Teams often have internal secret formats that don't match standard patterns. With custom masking:

- **Compliance**: Ensure internal tokens never appear in logs or CI output
- **Security**: Protect organization-specific API keys and credentials
- **Flexibility**: Define patterns that match your naming conventions

## Try It Out

See the [secrets-masking example](https://github.com/cloudposse/atmos/tree/main/examples/secrets-masking) for a complete demo with test components.

## Get Involved

- [Open an issue](https://github.com/cloudposse/atmos/issues/new) for feature requests
- Join our [Slack community](https://slack.cloudposse.com/) for discussions
