---
slug: metadata-inheritance
title: "Metadata Inheritance"
authors: [osterman]
tags: [feature, stacks, inheritance]
---

Metadata now inherits from base components, just like `vars` and `settings`.

<!--truncate-->

## The Problem

When managing infrastructure at scale, you want to enforce consistent governance policies across your components. Lock critical infrastructure to prevent accidental changes. Use standardized workspace naming patterns. Document component ownership. Apply the same metadata settings everywhere.

But before this release, `metadata` didn't inherit from base components. Even though you could inherit `vars` and `settings`, you had to copy-paste metadata configuration to every derived component:

```yaml
# You defined governance once...
vpc/defaults:
  metadata:
    locked: true
    terraform_workspace_pattern: "{tenant}-{environment}-{stage}"
    description: "Virtual Private Cloud network configuration"
    owner: "platform-team"

# ...but had to repeat it for every VPC instance
vpc/primary:
  metadata:
    inherits: [vpc/defaults]
    component: vpc
    locked: true                                                  # Repeated
    terraform_workspace_pattern: "{tenant}-{environment}-{stage}" # Repeated
    description: "Virtual Private Cloud network configuration"    # Repeated
    owner: "platform-team"                                        # Repeated

vpc/secondary:
  metadata:
    inherits: [vpc/defaults]
    component: vpc
    locked: true                                                  # Repeated again
    terraform_workspace_pattern: "{tenant}-{environment}-{stage}" # Repeated again
    description: "Virtual Private Cloud network configuration"    # Repeated again
    owner: "platform-team"                                        # Repeated again
```

This made governance settings harder to maintain and easier to forget.

## The Solution

Now it just works:

```yaml
vpc/defaults:
  metadata:
    type: abstract
    locked: true
    terraform_workspace_pattern: "{tenant}-{environment}-{stage}"
    description: "Virtual Private Cloud network configuration"
    owner: "platform-team"

vpc/primary:
  metadata:
    inherits: [vpc/defaults]
    component: vpc
    # locked, terraform_workspace_pattern, description, and owner are all inherited

vpc/secondary:
  metadata:
    inherits: [vpc/defaults]
    component: vpc
    # All governance settings inherited - no repetition needed
```

The only field that doesn't inherit is `metadata.inherits` itself.

## Configuration

Metadata inheritance is now enabled by default. If this causes issues with existing configurations, you can disable it:

```yaml
# atmos.yaml
stacks:
  inherit:
    metadata: false
```

See the [inheritance documentation](/core-concepts/stacks/inheritance) for details.
