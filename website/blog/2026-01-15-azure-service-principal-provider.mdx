---
slug: azure-service-principal-provider
title: "Azure Service Principal Authentication Provider"
authors: [osterman]
tags: [feature]
---

Atmos now supports Azure Service Principal authentication for automated environments using client credentials.

<!--truncate-->

## What Changed

We've added the `azure/service-principal` provider to the Atmos auth system, enabling OAuth2 client credentials authentication for Azure. This complements the existing `azure/cli`, `azure/device-code`, and `azure/oidc` providers.

## When to Use Which Provider

| Provider | Use Case | Secrets Required |
|----------|----------|------------------|
| `azure/oidc` | **CI/CD (recommended)** - GitHub Actions, Azure DevOps | None (federated tokens) |
| `azure/service-principal` | Automation with static credentials | `AZURE_CLIENT_SECRET` env var |
| `azure/device-code` | Developer workstations (interactive) | None (browser-based) |
| `azure/cli` | Developer workstations (uses `az login`) | None (CLI-based) |

**For CI/CD, we recommend `azure/oidc`** - it uses federated tokens and requires no secrets.

## Why Service Principal?

Use `azure/service-principal` when:
- Your CI/CD platform doesn't support OIDC federation with Azure
- You're running in environments without browser access (embedded systems, etc.)
- You need static credentials for legacy automation

**Terraform Compatible**: Sets `ARM_CLIENT_ID`, `ARM_CLIENT_SECRET`, and `ARM_TENANT_ID` for seamless integration with azurerm and azapi Terraform providers.

## How to Use It

```yaml
auth:
  providers:
    azure-automation:
      kind: azure/service-principal
      spec:
        tenant_id: "your-tenant-id"
        client_id: "your-client-id"
        subscription_id: "your-subscription-id"
        # client_secret via AZURE_CLIENT_SECRET env var

  identities:
    azure-prod:
      kind: azure/subscription
      via:
        provider: azure-automation
      principal:
        subscription_id: "your-subscription-id"
```

Then authenticate:

```bash
export AZURE_CLIENT_SECRET="your-client-secret"
atmos auth login --identity azure-prod
atmos terraform plan -s your-stack
```

## Get Involved

- Read the [Auth documentation](/cli/configuration/auth/providers)
- Report issues on [GitHub](https://github.com/cloudposse/atmos/issues)
