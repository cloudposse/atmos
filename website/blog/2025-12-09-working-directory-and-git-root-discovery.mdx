---
slug: working-directory-and-git-root-discovery
title: "Working Directory Support, Parent Directory Search, and Git Root Discovery"
authors: [osterman]
tags: [feature, dx]
date: 2025-12-09
---

Atmos now searches parent directories for `atmos.yaml`, discovers `.atmos.d/` at the git repository root, and supports `working_directory` for custom commands and workflow steps.

<!--truncate-->

## Parent Directory Search

Atmos now automatically searches parent directories for `atmos.yaml` when not found in the current directory. Run Atmos from any subdirectory without specifying `--config-path`:

```bash
cd /repo/components/terraform/vpc
atmos terraform plan vpc -s prod  # Finds /repo/atmos.yaml automatically
```

## Git Root Discovery for `.atmos.d/`

Atmos automatically discovers `.atmos.d/` at your git repository root, even when running from subdirectories. Define shared custom commands once at the repo root and use them from anywhere.

```
repo/
├── .atmos.d/
│   └── commands.yaml    # Available repo-wide
├── atmos.yaml
└── components/terraform/vpc/
    └── main.tf          # Run atmos from here
```

## Working Directory for Commands and Workflows

Custom commands and workflow steps can now specify a `working_directory` to control where they execute:

```yaml
# .atmos.d/commands.yaml
commands:
  - name: build
    working_directory: !repo-root .
    steps:
      - make build
```

```yaml
# stacks/workflows/deploy.yaml
workflows:
  download-tools:
    working_directory: /tmp
    steps:
      - command: wget https://example.com/tools.tar.gz
        type: shell
      - command: tar -xzf tools.tar.gz
        type: shell
```

- **Absolute paths** are used as-is
- **Relative paths** resolve against `base_path`
- **Step-level** overrides workflow-level settings

## Documentation

- [CLI Configuration](/cli/configuration) — Parent directory search, git root discovery, and `.atmos.d/` auto-imports
- [Custom Commands](/cli/configuration/commands#working-directory)
- [Workflows](/cli/configuration/workflows#working-directory)
