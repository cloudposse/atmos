# COMPANY-WIDE DEFAULTS

vars:
  namespace: acme

terraform:
  vars:
    label_order:
      - namespace
      - stage
      - tenant
      - name
      - attributes
    # These tags will be applied to all resources provisioned in all stages and all GCP projects
    tags:
      atmos_component: "{{ .atmos_component }}"
      atmos_stack: "{{ .atmos_stack }}"
      atmos_manifest: "{{ .atmos_stack_file }}"
      terraform_workspace: "{{ .workspace }}"
      # `provisioned_at` uses the Sprig functions
      # https://masterminds.github.io/sprig/date.html
      # https://pkg.go.dev/time#pkg-constants
      # provisioned_at: '{{ dateInZone "2006-01-02T15:04:05Z07:00" (now) "UTC" }}'

  # Terraform backend
  # https://atmos.tools/core-concepts/components/terraform/backends/#google-cloud-storage-backend
  backend_type: gcs
  backend:
    gcs:
      bucket: "xxxxxxxxxxxxx"
      prefix: "terraform/tfstate"
