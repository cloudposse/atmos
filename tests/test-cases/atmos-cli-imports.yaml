# yaml-language-server: $schema=schema.json
tests:
  - name: atmos_describe_config_imports
    snapshot: true
    enabled: true
    description: "Ensure Atmos processes import configurations"
    workdir: "fixtures/scenarios/atmos-cli-imports"
    command: "atmos"
    args:
      - "describe"
      - "config"
      - "-f"
      - "yaml"
    expect:
      valid:
        - "yaml"
      exit_code: 0
      diff:
        - "github_token"
        - "Failed to use pager"  # May or may not appear depending on environment
      sanitize:
        "basePathAbsolute: .+": "basePathAbsolute: /absolute/path/to/repo"
        # Normalize pager setting which varies by environment (PAGER env var)
        'pager: ("false"|""|cat)': "pager: less"
        # Normalize realm hash which varies by environment (derived from config path)
        "realm: [a-f0-9]+": "realm: <hash>"
  - name: atmos_describe_configuration
    snapshot: true
    enabled: true
    description: "Ensure Atmos processes configurations"
    workdir: "fixtures/scenarios/atmos-configuration"
    command: "atmos"
    args:
      - "describe"
      - "config"
      - "-f"
      - "yaml"
    expect:
      valid:
        - "yaml"
      exit_code: 0
      diff:
        - "github_token"
        - "Failed to use pager"  # May or may not appear depending on environment
      sanitize:
        "basePathAbsolute: .+": "basePathAbsolute: /absolute/path/to/repo"
        # Normalize pager setting which varies by environment (PAGER env var)
        'pager: ("false"|""|cat)': "pager: less"
        # Normalize realm hash which varies by environment (derived from config path)
        "realm: [a-f0-9]+": "realm: <hash>"
