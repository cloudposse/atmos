tests:
  - name: atmos_vendor_pull_with_globs
    short: false
    enabled: true
    description: "Ensure atmos vendor pull command executes without errors and files are present."
    workdir: "fixtures/scenarios/vendor-globs"
    command: "atmos"
    args:
      - "vendor"
      - "pull"
    preconditions:
      - "github_token"
    expect:
      file_exists:
        - "./components/library/examples/demo-library/github/stargazers/README.md"
        - "./components/library/examples/demo-library/ipinfo/README.md"
        - "./components/library/examples/demo-library/weather/README.md"
        - "./components/library/examples/demo-library/README.md"
        - "./components/library/examples/demo-stacks/components/terraform/myapp/main.tf"
        - "./components/library/examples/demo-stacks/components/terraform/myapp/outputs.tf"
        - "./components/library/examples/demo-stacks/components/terraform/myapp/README.md"
        - "./components/library/examples/demo-stacks/components/terraform/myapp/variables.tf"
        - "./components/library/examples/demo-stacks/components/terraform/myapp/versions.tf"
        - "./components/library/weather/README.md"
        - "./components/globs/examples/demo-library/ipinfo/README.md"
        - "./components/globs/examples/demo-library/weather/README.md"
        - "./components/globs/examples/demo-library/README.md"
        - "./components/globs/examples/demo-localstack/.gitignore"
        - "./components/globs/examples/demo-localstack/atmos.yaml"
        - "./components/globs/examples/demo-localstack/docker-compose.yml"
        - "./components/globs/examples/demo-localstack/README.md"
      file_not_exists:
        - "./components/library/examples/demo-workflows/stacks/catalog/myapp.yaml"
        - "./components/library/examples/demo-library/github/stargazers/main.tf"
        - "./components/library/examples/demo-library/github/stargazers/outputs.tf"
        - "./components/library/examples/demo-library/github/stargazers/providers.tf"
        - "./components/library/examples/demo-library/github/stargazers/variables.tf"
        - "./components/library/examples/demo-library/github/stargazers/versions.tf"
        - "./components/library/examples/demo-library/ipinfo/main.tf"
        - "./components/library/examples/demo-library/ipinfo/outputs.tf"
        - "./components/library/examples/demo-library/ipinfo/providers.tf"
        - "./components/library/examples/demo-library/ipinfo/variables.tf"
        - "./components/library/examples/demo-library/ipinfo/versions.tf"
        - "./components/library/examples/demo-library/weather/main.tf"
        - "./components/library/examples/demo-library/weather/outputs.tf"
        - "./components/library/examples/demo-library/weather/providers.tf"
        - "./components/library/examples/demo-library/weather/variables.tf"
        - "./components/library/examples/demo-library/weather/versions.tf"
        - "./components/globs/examples/demo-library/github/stargazers/README.md"
        - "./components/globs/examples/demo-library/github/stargazers/main.tf"
        - "./components/globs/examples/demo-library/github/stargazers/outputs.tf"
        - "./components/globs/examples/demo-library/github/stargazers/providers.tf"
        - "./components/globs/examples/demo-library/github/stargazers/variables.tf"
        - "./components/globs/examples/demo-library/github/stargazers/versions.tf"
        - "./components/globs/examples/demo-library/ipinfo/outputs.tf"
        - "./components/globs/examples/demo-library/ipinfo/providers.tf"
        - "./components/globs/examples/demo-library/ipinfo/variables.tf"
        - "./components/globs/examples/demo-library/ipinfo/versions.tf"
        - "./components/globs/examples/demo-library/weather/main.tf"
        - "./components/globs/examples/demo-library/weather/outputs.tf"
        - "./components/globs/examples/demo-library/weather/providers.tf"
        - "./components/globs/examples/demo-library/weather/variables.tf"
        - "./components/globs/examples/demo-library/weather/versions.tf"
      exit_code: 0
