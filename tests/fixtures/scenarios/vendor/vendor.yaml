apiVersion: atmos/v1
kind: AtmosVendorConfig
metadata:
  name: demo-vendoring
  description: Atmos vendoring manifest for Atmos demo component library
spec:
  # Import other vendor manifests, if necessary
  imports: []

  sources:
    - component: "github/stargazers"
      source: "github.com/cloudposse/atmos.git//examples/demo-library/{{ .Component }}?ref={{.Version}}"
      version: "main"
      tags:
        - demo
        - github
        - https
      targets:
        - "components/terraform/{{ .Component }}/{{.Version}}"
      included_paths:
        - "**/*.tf"
        - "**/*.tfvars"
        - "**/*.md"

    - component: "test-components"
      source: "file:///./test-components"
      version: "main"
      tags:
        - file
        - demo
      targets:
        - "components/terraform/{{ .Component }}/{{.Version}}"

    - component: "weather"
      source: "git::https://github.com/cloudposse/atmos.git//examples/demo-library/{{ .Component }}?ref={{.Version}}"
      version: "main"
      tags:
        - git
        - demo
      targets:
        - "components/terraform/{{ .Component }}/{{.Version}}"

    - component: "myapp1"
      source: "oci://ghcr.io/cloudposse/atmos/tests/fixtures/components/terraform/myapp:{{.Version}}"
      version: "v0"
      tags:
        - oci
      targets:
        - "components/terraform/myapp1"

    - component: "myapp2"
      source: "../../../fixtures/components/terraform/myapp" # required for test URI contain path traversal
      tags:
        - dir
      targets:
        - "components/terraform/myapp2"
      included_paths:
        - "**/*.tf"
        - "**/*.md"
        - "**/*.tftmpl"
        - "**/modules/**"
      excluded_paths: []
