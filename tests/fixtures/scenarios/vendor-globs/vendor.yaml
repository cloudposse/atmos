apiVersion: atmos/v1
kind: AtmosVendorConfig
metadata:
  name: demo-vendoring
  description: Atmos vendoring manifest for Atmos demo component library
spec:
  # Import other vendor manifests, if necessary
  imports: []

  sources:
    - component: "test globs"
      source: "github.com/cloudposse/atmos.git?ref={{.Version}}"
      # TODO
      # Revert to "main" once the mock component is merged into the main branch
      # https://github.com/cloudposse/atmos/pull/1213
      #version: "main"
      version: "chore/replace-mock-component"
      included_paths:
        - "**/{demo-library,demo-stacks}/**/*.{tf,md}"
      excluded_paths:
        - "**/demo-library/**/*.{tfvars,tf}"
      targets:
        - "components/library/"
      tags:
        - demo

    - component: "test globs without double stars upfront"
      source: "github.com/cloudposse/atmos.git//examples/demo-library?ref={{.Version}}"
      included_paths:
        - "/mock/*.md"
      # TODO
      # Revert to "main" once the mock component is merged into the main branch
      # https://github.com/cloudposse/atmos/pull/1213
      #version: "main"
      version: "chore/replace-mock-component"
      targets:
        - "components/library/"
      tags:
        - demo
    
    - component: "test shallow globs and folder exclusion"
      source: "github.com/cloudposse/atmos.git?ref={{.Version}}"
      # TODO
      # Revert to "main" once the mock component is merged into the main branch
      # https://github.com/cloudposse/atmos/pull/1213
      #version: "main"
      version: "chore/replace-mock-component"
      included_paths:
        - "**/demo-localstack/*"
        - "**/demo-library/**"
      excluded_paths:
        - "**/demo-library/**/stargazers/**"
        - "**/demo-library/**/*.tf"
      targets:
        - "components/globs/"
      tags:
        - demo
