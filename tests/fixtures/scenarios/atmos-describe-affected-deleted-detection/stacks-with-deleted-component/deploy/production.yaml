# yaml-language-server: $schema=https://atmos.tools/schemas/atmos/atmos-manifest/1.0/atmos-manifest.json
#
# BASE (main branch) state - ENTIRE stack exists here
# This stack does NOT exist in HEAD - simulates deleting an entire stack
#
# All components in this stack should appear in describe affected output with:
#   affected: "deleted.stack"
#   deleted: true
#   deletion_type: "stack"

vars:
  environment: ue1
  stage: production

components:
  terraform:
    # VPC component - will be marked as deleted (stack deletion)
    vpc:
      metadata:
        component: mock
      vars:
        cidr_block: "10.1.0.0/16"
        environment: "{{ .vars.environment }}"

    # EKS component - will be marked as deleted (stack deletion)
    eks:
      metadata:
        component: mock
      vars:
        cluster_name: "eks-{{ .vars.stage }}"
        node_count: 5

    # RDS component - will be marked as deleted (stack deletion)
    rds:
      metadata:
        component: mock
      vars:
        instance_class: "db.r5.xlarge"
        multi_az: true
