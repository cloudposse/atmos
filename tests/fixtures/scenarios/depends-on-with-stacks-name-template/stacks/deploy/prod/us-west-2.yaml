# yaml-language-server: $schema=https://atmos.tools/schemas/atmos/atmos-manifest/1.0/atmos-manifest.json

import:
  - mixins/region/us-west-2
  - mixins/stage/prod

components:
  terraform:

    vpc:
      metadata:
        component: mock

    tgw/attachment:
      metadata:
        component: mock
      settings:
        depends_on:
          1:
            # `tgw/attachment` depends on the `vpc` component in the same stack (same account, same region)
            component: vpc
            # `stack` is optional if it's the same as `stacks.name_template` in `atmos.yaml`
            # stack: "{{ .settings.context.environment }}-{{ .settings.context.stage }}"
          2:
            # `tgw/attachment` depends on the `tgw/hub` components in the `network` account in `us-east-1` region
            component: tgw/hub
            stack: "ue1-network"
