# yaml-language-server: $schema=https://atmos.tools/schemas/atmos/atmos-manifest/1.0/atmos-manifest.json

import:
  - mixins/region/us-east-1
  - mixins/stage/prod

components:
  terraform:

    vpc:
      metadata:
        component: mock
        # Lock the component so it doesn't get included in the affected list
        locked: true

    tgw/attachment:
      metadata:
        component: mock
      settings:
        depends_on:
          1:
            # `tgw/attachment` depends on the `vpc` component in the same stack (same account, same region)
            component: vpc
          2:
            # `tgw/attachment` depends on the `tgw/hub` component in the same region in the `network` account
            component: tgw/hub
            stack: "{{ .vars.environment }}-network"
