# Atmos CLI Configuration
# Generated by: atmos init simple-scaffold

# Base path for components and stacks
base_path: .

# Components configuration
components:
  terraform:
    base_path: components/terraform
    apply_auto_approve: false
    deploy_run_init: true
    vars:
      enabled: true
      files:
        - "*.tfvars"
        - "*.tfvars.json"
      env:
        TF_VAR_environment: "{{ .Config.environment }}"
        TF_VAR_project_name: "{{ .Config.name }}"
        TF_VAR_author: "{{ .Config.author }}"

# Scaffold configuration
scaffold:
  templates:
    terraform-module:
      source: "github.com/cloudposse/terraform-aws-s3-bucket"
      ref: "v1.0.0"
      target_dir: "./components/terraform/{{ .Config.name }}"
      values:
        bucket_name: "{{ .Config.name }}-{{ .Config.environment }}"
        environment: "{{ .Config.environment }}"
        author: "{{ .Config.author }}"

    component-config:
      source: "github.com/cloudposse/terraform-aws-vpc"
      ref: "v2.0.0"
      target_dir: "./components/terraform/{{ .Config.name }}-vpc"
      values:
        vpc_name: "{{ .Config.name }}-vpc"
        environment: "{{ .Config.environment }}"
