# Aqua Package Manager Configuration

This directory contains [Aqua](https://aquaproj.github.io/) configuration for managing CLI tool versions used in CI/CD workflows.

## What is Aqua?

Aqua is a declarative CLI version manager that ensures consistent tool versions across development environments and CI pipelines. It downloads tools from their official sources and verifies checksums for security.

## Files

- **aqua.yaml** - Main configuration file that defines registries and imports
- **aqua-checksums.json** - Checksum verification file for security (auto-generated by `aqua upc`)
- **imports/*.yaml** - Individual tool definitions (one file per tool for clarity)

## Usage

### CI Workflows

The `.github/workflows/autofix.yml` workflow uses Aqua to install tools like `gofumpt`:

```yaml
- uses: aquaproj/aqua-installer@v3
  with:
    aqua_version: v2.43.0
- run: aqua upc -prune  # Update checksums
```

After this step, tools defined in `aqua.yaml` are available on PATH.

### Local Development

Install Aqua locally:

```bash
brew install aquaproj/aqua/aqua
```

Then install tools:

```bash
aqua install
```

## Adding New Tools

1. Create a new file in `imports/` (e.g., `imports/mytool.yaml`):
   ```yaml
   packages:
     - name: owner/repo@vX.Y.Z
   ```

2. Update checksums:
   ```bash
   aqua upc -prune
   ```

3. Commit both the import file and the updated `aqua-checksums.json`.

## Current Tools

| Tool | Version | Purpose |
|------|---------|---------|
| gofumpt | v0.7.0 | Go code formatter (stricter than gofmt) |

## References

- [Aqua Documentation](https://aquaproj.github.io/)
- [Aqua Standard Registry](https://github.com/aquaproj/aqua-registry)
