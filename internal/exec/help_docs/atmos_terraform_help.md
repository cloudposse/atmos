# Atmos Terraform Help

Check out the [Atmos Terraform CLI documentation](https://atmos.tools/cli/commands/terraform/usage).

Atmos supports all Terraform commands and options described in
the [Terraform CLI docs](https://www.terraform.io/cli/commands).

__NOTE:__ Execute `terraform --help` to see help for the Terraform CLI commands.

In addition, the `component` argument and `stack` flag are required to generate the variables and backend config
for the component in the stack.
For example: `atmos terraform apply vpc --stack plat-ue2-prod`

<br/>

## Additions and differences from native Terraform

- Before executing other `terraform` commands, Atmos runs `terraform init`
  <br/>
- You can skip over Atmos calling `terraform init` if you know your project is already in a good working state by using
  the `--skip-init` flag. For example: `atmos terraform plan vpc -s plat-ue2-prod --skip-init`
  <br/>
- `atmos terraform deploy` command executes `terraform apply -auto-approve` (sets the `-auto-approve` flag
  when running `terraform apply`)
  <br/>
- `atmos terraform deploy` command supports the `--deploy-run-init` flag to enable/disable running `terraform
  init` before executing the command
  <br/>
- `atmos terraform apply` and `atmos terraform deploy` commands support `--from-plan` flag. If the flag is
  specified, the commands will use the `planfile` previously generated by the `atmos terraform plan` command
  instead of generating a new `planfile`
  <br/>
- `atmos terraform apply` and `atmos terraform deploy` commands support the `--planfile` flag to specify the
  path to a planfile.
  The `--planfile` flag should be used instead of the `planfile` argument in the native `terraform apply
  planfile` command
  <br/>
- `atmos terraform clean` command deletes the `.terraform` folder, `.terraform.lock.hcl` lock file, and the
  previously generated `planfile`, `varfile` and `backend.tf.json` file for the specified component and
  stack. Use the `--skip-lock-file`' flag to skip deleting the lock file
  <br/>
- `atmos terraform workspace` command first runs `terraform init -reconfigure`, then `terraform workspace
  select`, and if the workspace was not created before, it then runs `terraform workspace new`
  <br/>
- `atmos terraform import` command searches for the `region` in the variables for the specified component and
  stack, and if it finds it, sets `AWS_REGION` ENV var before executing the command
  <br/>
- `atmos terraform generate backend` command generates a backend config file for a component in a stack
  <br/>
- `atmos terraform generate backends` command generates backend config files for all Atmos components in all stacks
  <br/>
- `atmos terraform generate varfile` command generates a varfile for a component in a stack
  <br/>
- `atmos terraform generate varfiles` command generates varfiles for all Atmos components in all stacks
  <br/>
- `atmos terraform shell` command configures an environment for a component in a stack and starts a new shell,
  allowing executing all native terraform commands inside the shell without using Atmos-specific arguments and flags
  <br/>
- double-dash `--` can be used to signify the end of the options for Atmos and the start of the additional native
  arguments and flags for the Terraform commands.
  For example: `atmos terraform plan vpc -s plat-ue2-prod -- -refresh=false -lock=false`
  <br/>
